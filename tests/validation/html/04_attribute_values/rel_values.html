<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rel Attribute Values - Manual Validation Test</title>
    <!--
        Cross Guard Manual Validation Test
        Category: 04_attribute_values
        File: rel_values.html

        Expected Can I Use IDs:
        - link-rel-preload: https://caniuse.com/link-rel-preload
        - link-rel-prefetch: https://caniuse.com/link-rel-prefetch
        - link-rel-dns-prefetch: https://caniuse.com/link-rel-dns-prefetch
        - link-rel-preconnect: https://caniuse.com/link-rel-preconnect
        - link-rel-modulepreload: https://caniuse.com/link-rel-modulepreload

        Features tested:
        - rel="preload"
        - rel="prefetch"
        - rel="dns-prefetch"
        - rel="preconnect"
        - rel="modulepreload"
    -->

    <!-- Feature 1: rel="preload" -->
    <link rel="preload" href="critical.css" as="style">
    <link rel="preload" href="hero-image.jpg" as="image">
    <link rel="preload" href="main-font.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="app.js" as="script">

    <!-- Feature 2: rel="prefetch" -->
    <link rel="prefetch" href="next-page.html">
    <link rel="prefetch" href="next-page-styles.css" as="style">
    <link rel="prefetch" href="large-image.jpg" as="image">

    <!-- Feature 3: rel="dns-prefetch" -->
    <link rel="dns-prefetch" href="//api.example.com">
    <link rel="dns-prefetch" href="//cdn.example.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//analytics.google.com">

    <!-- Feature 4: rel="preconnect" -->
    <link rel="preconnect" href="https://api.example.com">
    <link rel="preconnect" href="https://cdn.example.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Feature 5: rel="modulepreload" -->
    <link rel="modulepreload" href="./modules/utils.js">
    <link rel="modulepreload" href="./modules/components.js">
    <link rel="modulepreload" href="./modules/api.js">

    <!-- Standard stylesheets for reference -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>HTML5 Link Rel Attribute Values Test</h1>
    <p>This file tests detection of resource hint link rel attribute values.</p>

    <!-- Feature 1: rel="preload" -->
    <section>
        <h2>Feature: rel="preload"</h2>
        <p>Can I Use ID: <code>link-rel-preload</code></p>
        <p>URL: <a href="https://caniuse.com/link-rel-preload">caniuse.com/link-rel-preload</a></p>

        <pre><code>&lt;!-- Preload critical CSS --&gt;
&lt;link rel="preload" href="critical.css" as="style"&gt;

&lt;!-- Preload hero image --&gt;
&lt;link rel="preload" href="hero-image.jpg" as="image"&gt;

&lt;!-- Preload font --&gt;
&lt;link rel="preload" href="main-font.woff2" as="font" type="font/woff2" crossorigin&gt;

&lt;!-- Preload JavaScript --&gt;
&lt;link rel="preload" href="app.js" as="script"&gt;</code></pre>

        <h3>Common "as" attribute values:</h3>
        <ul>
            <li><code>style</code> - CSS stylesheets</li>
            <li><code>script</code> - JavaScript files</li>
            <li><code>image</code> - Images</li>
            <li><code>font</code> - Font files</li>
            <li><code>fetch</code> - Fetch/XHR requests</li>
            <li><code>document</code> - HTML documents</li>
        </ul>

        <p>Preload instructs the browser to fetch a resource early, as it will be needed soon.</p>
    </section>

    <!-- Feature 2: rel="prefetch" -->
    <section>
        <h2>Feature: rel="prefetch"</h2>
        <p>Can I Use ID: <code>link-rel-prefetch</code></p>
        <p>URL: <a href="https://caniuse.com/link-rel-prefetch">caniuse.com/link-rel-prefetch</a></p>

        <pre><code>&lt;!-- Prefetch next page --&gt;
&lt;link rel="prefetch" href="next-page.html"&gt;

&lt;!-- Prefetch resources for next page --&gt;
&lt;link rel="prefetch" href="next-page-styles.css" as="style"&gt;
&lt;link rel="prefetch" href="large-image.jpg" as="image"&gt;</code></pre>

        <p>Prefetch hints that a resource will be needed for future navigation. Browser fetches it during idle time.</p>
    </section>

    <!-- Feature 3: rel="dns-prefetch" -->
    <section>
        <h2>Feature: rel="dns-prefetch"</h2>
        <p>Can I Use ID: <code>link-rel-dns-prefetch</code></p>
        <p>URL: <a href="https://caniuse.com/link-rel-dns-prefetch">caniuse.com/link-rel-dns-prefetch</a></p>

        <pre><code>&lt;!-- DNS prefetch for third-party domains --&gt;
&lt;link rel="dns-prefetch" href="//api.example.com"&gt;
&lt;link rel="dns-prefetch" href="//cdn.example.com"&gt;
&lt;link rel="dns-prefetch" href="//fonts.googleapis.com"&gt;
&lt;link rel="dns-prefetch" href="//analytics.google.com"&gt;</code></pre>

        <p>DNS prefetch performs DNS resolution in advance, reducing latency when the resource is needed.</p>
    </section>

    <!-- Feature 4: rel="preconnect" -->
    <section>
        <h2>Feature: rel="preconnect"</h2>
        <p>Can I Use ID: <code>link-rel-preconnect</code></p>
        <p>URL: <a href="https://caniuse.com/link-rel-preconnect">caniuse.com/link-rel-preconnect</a></p>

        <pre><code>&lt;!-- Preconnect to APIs and CDNs --&gt;
&lt;link rel="preconnect" href="https://api.example.com"&gt;
&lt;link rel="preconnect" href="https://cdn.example.com" crossorigin&gt;
&lt;link rel="preconnect" href="https://fonts.gstatic.com" crossorigin&gt;</code></pre>

        <p>Preconnect establishes early connections (DNS + TCP + TLS) to third-party origins.</p>
    </section>

    <!-- Feature 5: rel="modulepreload" -->
    <section>
        <h2>Feature: rel="modulepreload"</h2>
        <p>Can I Use ID: <code>link-rel-modulepreload</code></p>
        <p>URL: <a href="https://caniuse.com/link-rel-modulepreload">caniuse.com/link-rel-modulepreload</a></p>

        <pre><code>&lt;!-- Preload ES modules --&gt;
&lt;link rel="modulepreload" href="./modules/utils.js"&gt;
&lt;link rel="modulepreload" href="./modules/components.js"&gt;
&lt;link rel="modulepreload" href="./modules/api.js"&gt;

&lt;!-- Use the modules --&gt;
&lt;script type="module"&gt;
  import { helper } from './modules/utils.js';
  import { Component } from './modules/components.js';
&lt;/script&gt;</code></pre>

        <p>Modulepreload is specifically for ES modules, ensuring they are fetched, parsed, and compiled early.</p>

        <script type="module">
            // Using the preloaded modules
            import('./modules/utils.js').catch(() => {});
        </script>
    </section>

    <!-- Combined example -->
    <section>
        <h2>Combined Resource Hints Strategy</h2>

        <pre><code>&lt;head&gt;
  &lt;!-- 1. DNS prefetch for all third-party domains --&gt;
  &lt;link rel="dns-prefetch" href="//cdn.example.com"&gt;
  &lt;link rel="dns-prefetch" href="//api.example.com"&gt;

  &lt;!-- 2. Preconnect to critical third-party origins --&gt;
  &lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;
  &lt;link rel="preconnect" href="https://fonts.gstatic.com" crossorigin&gt;

  &lt;!-- 3. Preload critical resources --&gt;
  &lt;link rel="preload" href="critical.css" as="style"&gt;
  &lt;link rel="preload" href="hero.webp" as="image"&gt;
  &lt;link rel="preload" href="main.woff2" as="font" type="font/woff2" crossorigin&gt;

  &lt;!-- 4. Modulepreload for ES modules --&gt;
  &lt;link rel="modulepreload" href="./app.js"&gt;

  &lt;!-- 5. Prefetch next page resources --&gt;
  &lt;link rel="prefetch" href="about.html"&gt;
  &lt;link rel="prefetch" href="about-hero.webp" as="image"&gt;
&lt;/head&gt;</code></pre>

        <h3>Loading Priority Order:</h3>
        <ol>
            <li><strong>preload</strong> - Highest priority, load immediately</li>
            <li><strong>preconnect</strong> - Establish connections early</li>
            <li><strong>dns-prefetch</strong> - Resolve DNS early</li>
            <li><strong>modulepreload</strong> - Load and parse ES modules</li>
            <li><strong>prefetch</strong> - Load during idle time for future navigation</li>
        </ol>
    </section>

    <!--
        VALIDATION INSTRUCTIONS:

        1. Load this file in Cross Guard
        2. Check that the following features are detected:
           - link-rel-preload (rel="preload")
           - link-rel-prefetch (rel="prefetch")
           - link-rel-dns-prefetch (rel="dns-prefetch")
           - link-rel-preconnect (rel="preconnect")
           - link-rel-modulepreload (rel="modulepreload")
        3. Verify browser support for each matches their respective Can I Use pages
        4. Record results in CHECKLIST.md
    -->
</body>
</html>
