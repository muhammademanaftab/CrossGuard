<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Formats - Manual Validation Test</title>
    <!--
        Cross Guard Manual Validation Test
        Category: 05_special_patterns
        File: media_formats.html

        Expected Can I Use IDs:
        - webm: https://caniuse.com/webm
        - webp: https://caniuse.com/webp
        - avif: https://caniuse.com/avif
        - heif: https://caniuse.com/heif
        - jpeg-xl: https://caniuse.com/jpegxl
        - apng: https://caniuse.com/apng

        Features tested:
        - WebM video format
        - WebP image format
        - AVIF image format
        - HEIF/HEIC image format
        - JPEG XL image format
        - APNG animated images
    -->
</head>
<body>
    <h1>HTML5 Media Formats Test</h1>
    <p>This file tests detection of modern media format support.</p>

    <!-- Feature 1: WebM Video Format -->
    <section>
        <h2>Feature: WebM Video Format</h2>
        <p>Can I Use ID: <code>webm</code></p>
        <p>URL: <a href="https://caniuse.com/webm">caniuse.com/webm</a></p>

        <h3>WebM video (simple)</h3>
        <video width="640" height="360" controls>
            <source src="video.webm" type="video/webm">
            <source src="video.mp4" type="video/mp4">
            Your browser does not support WebM video.
        </video>

        <h3>WebM video with VP8 codec</h3>
        <video width="640" height="360" controls>
            <source src="video-vp8.webm" type="video/webm; codecs=vp8,vorbis">
            <source src="video.mp4" type="video/mp4">
            Your browser does not support WebM video.
        </video>

        <h3>WebM video with VP9 codec</h3>
        <video width="640" height="360" controls>
            <source src="video-vp9.webm" type="video/webm; codecs=vp9,opus">
            <source src="video-vp8.webm" type="video/webm; codecs=vp8,vorbis">
            <source src="video.mp4" type="video/mp4">
            Your browser does not support WebM video.
        </video>

        <h3>WebM video with AV1 codec (newest)</h3>
        <video width="640" height="360" controls>
            <source src="video-av1.webm" type="video/webm; codecs=av01.0.05M.08">
            <source src="video-vp9.webm" type="video/webm; codecs=vp9">
            <source src="video.mp4" type="video/mp4">
        </video>

        <pre><code>&lt;video controls&gt;
  &lt;source src="video.webm" type="video/webm; codecs=vp9,opus"&gt;
  &lt;source src="video.webm" type="video/webm; codecs=vp8,vorbis"&gt;
  &lt;source src="video.mp4" type="video/mp4"&gt;
&lt;/video&gt;</code></pre>

        <p>WebM is an open video format with excellent compression (VP8/VP9/AV1 codecs).</p>
    </section>

    <!-- Feature 2: WebP Image Format -->
    <section>
        <h2>Feature: WebP Image Format</h2>
        <p>Can I Use ID: <code>webp</code></p>
        <p>URL: <a href="https://caniuse.com/webp">caniuse.com/webp</a></p>

        <h3>Static WebP image</h3>
        <picture>
            <source srcset="image.webp" type="image/webp">
            <source srcset="image.jpg" type="image/jpeg">
            <img src="image.jpg" alt="WebP with JPEG fallback" width="400" height="300">
        </picture>

        <h3>Animated WebP</h3>
        <picture>
            <source srcset="animation.webp" type="image/webp">
            <source srcset="animation.gif" type="image/gif">
            <img src="animation.gif" alt="Animated WebP" width="300" height="200">
        </picture>

        <h3>Direct WebP reference</h3>
        <img src="photo.webp" alt="Direct WebP image" width="400" height="300">

        <h3>WebP in srcset</h3>
        <img srcset="image-400.webp 400w,
                     image-800.webp 800w,
                     image-1200.webp 1200w"
             sizes="(max-width: 600px) 100vw, 50vw"
             src="image-800.webp"
             alt="Responsive WebP" width="400" height="300">

        <pre><code>&lt;picture&gt;
  &lt;source srcset="image.webp" type="image/webp"&gt;
  &lt;source srcset="image.jpg" type="image/jpeg"&gt;
  &lt;img src="image.jpg" alt="..."&gt;
&lt;/picture&gt;</code></pre>

        <p>WebP provides superior compression for both lossy and lossless images.</p>
    </section>

    <!-- Feature 3: AVIF Image Format -->
    <section>
        <h2>Feature: AVIF Image Format</h2>
        <p>Can I Use ID: <code>avif</code></p>
        <p>URL: <a href="https://caniuse.com/avif">caniuse.com/avif</a></p>

        <h3>AVIF with fallbacks</h3>
        <picture>
            <source srcset="image.avif" type="image/avif">
            <source srcset="image.webp" type="image/webp">
            <source srcset="image.jpg" type="image/jpeg">
            <img src="image.jpg" alt="AVIF with fallbacks" width="400" height="300">
        </picture>

        <h3>High-quality AVIF</h3>
        <picture>
            <source srcset="photo-hq.avif" type="image/avif">
            <source srcset="photo-hq.webp" type="image/webp">
            <img src="photo-hq.jpg" alt="High quality photo" width="600" height="400">
        </picture>

        <h3>AVIF animation</h3>
        <picture>
            <source srcset="animation.avif" type="image/avif">
            <source srcset="animation.webp" type="image/webp">
            <source srcset="animation.gif" type="image/gif">
            <img src="animation.gif" alt="Animated AVIF" width="300" height="200">
        </picture>

        <pre><code>&lt;picture&gt;
  &lt;source srcset="image.avif" type="image/avif"&gt;
  &lt;source srcset="image.webp" type="image/webp"&gt;
  &lt;img src="image.jpg" alt="..."&gt;
&lt;/picture&gt;</code></pre>

        <p>AVIF (AV1 Image Format) offers the best compression with high quality.</p>
    </section>

    <!-- Feature 4: HEIF/HEIC Image Format -->
    <section>
        <h2>Feature: HEIF/HEIC Image Format</h2>
        <p>Can I Use ID: <code>heif</code></p>
        <p>URL: <a href="https://caniuse.com/heif">caniuse.com/heif</a></p>

        <h3>HEIF with fallbacks</h3>
        <picture>
            <source srcset="image.heif" type="image/heif">
            <source srcset="image.heic" type="image/heic">
            <source srcset="image.avif" type="image/avif">
            <source srcset="image.webp" type="image/webp">
            <img src="image.jpg" alt="HEIF with fallbacks" width="400" height="300">
        </picture>

        <h3>HEIC image (iPhone format)</h3>
        <picture>
            <source srcset="photo.heic" type="image/heic">
            <source srcset="photo.jpg" type="image/jpeg">
            <img src="photo.jpg" alt="HEIC photo" width="400" height="300">
        </picture>

        <pre><code>&lt;picture&gt;
  &lt;source srcset="image.heif" type="image/heif"&gt;
  &lt;source srcset="image.heic" type="image/heic"&gt;
  &lt;img src="image.jpg" alt="..."&gt;
&lt;/picture&gt;</code></pre>

        <p>HEIF/HEIC is used by Apple devices; browser support is limited.</p>
    </section>

    <!-- Feature 5: JPEG XL Image Format -->
    <section>
        <h2>Feature: JPEG XL Image Format</h2>
        <p>Can I Use ID: <code>jpegxl</code></p>
        <p>URL: <a href="https://caniuse.com/jpegxl">caniuse.com/jpegxl</a></p>

        <h3>JPEG XL with fallbacks</h3>
        <picture>
            <source srcset="image.jxl" type="image/jxl">
            <source srcset="image.avif" type="image/avif">
            <source srcset="image.webp" type="image/webp">
            <source srcset="image.jpg" type="image/jpeg">
            <img src="image.jpg" alt="JPEG XL with fallbacks" width="400" height="300">
        </picture>

        <pre><code>&lt;picture&gt;
  &lt;source srcset="image.jxl" type="image/jxl"&gt;
  &lt;source srcset="image.avif" type="image/avif"&gt;
  &lt;img src="image.jpg" alt="..."&gt;
&lt;/picture&gt;</code></pre>

        <p>JPEG XL offers excellent compression but has limited browser support (currently being removed from browsers).</p>
    </section>

    <!-- Feature 6: APNG Animated Images -->
    <section>
        <h2>Feature: APNG (Animated PNG)</h2>
        <p>Can I Use ID: <code>apng</code></p>
        <p>URL: <a href="https://caniuse.com/apng">caniuse.com/apng</a></p>

        <h3>APNG animation</h3>
        <picture>
            <source srcset="animation.apng" type="image/apng">
            <source srcset="animation.webp" type="image/webp">
            <source srcset="animation.gif" type="image/gif">
            <img src="animation.gif" alt="APNG animation" width="300" height="200">
        </picture>

        <h3>Direct APNG reference</h3>
        <img src="loading-spinner.apng" alt="Loading spinner (APNG)" width="64" height="64">
        <img src="animated-icon.apng" alt="Animated icon (APNG)" width="48" height="48">

        <pre><code>&lt;picture&gt;
  &lt;source srcset="animation.apng" type="image/apng"&gt;
  &lt;source srcset="animation.gif" type="image/gif"&gt;
  &lt;img src="animation.gif" alt="..."&gt;
&lt;/picture&gt;</code></pre>

        <p>APNG provides better quality than GIF for animations while maintaining transparency.</p>
    </section>

    <!-- Combined format strategy -->
    <section>
        <h2>Complete Format Fallback Strategy</h2>

        <h3>Optimal image format cascade</h3>
        <picture>
            <!-- AVIF: Best compression, growing support -->
            <source srcset="photo.avif" type="image/avif">
            <!-- WebP: Good compression, excellent support -->
            <source srcset="photo.webp" type="image/webp">
            <!-- JPEG: Universal fallback -->
            <source srcset="photo.jpg" type="image/jpeg">
            <img src="photo.jpg" alt="Photo with optimal format selection"
                 width="800" height="600" loading="lazy">
        </picture>

        <h3>Responsive + format selection</h3>
        <picture>
            <!-- Large screens: AVIF -->
            <source media="(min-width: 1200px)"
                    srcset="hero-large.avif 1x, hero-large-2x.avif 2x"
                    type="image/avif">
            <source media="(min-width: 1200px)"
                    srcset="hero-large.webp 1x, hero-large-2x.webp 2x"
                    type="image/webp">
            <source media="(min-width: 1200px)"
                    srcset="hero-large.jpg 1x, hero-large-2x.jpg 2x">

            <!-- Medium screens -->
            <source media="(min-width: 768px)"
                    srcset="hero-medium.avif" type="image/avif">
            <source media="(min-width: 768px)"
                    srcset="hero-medium.webp" type="image/webp">
            <source media="(min-width: 768px)"
                    srcset="hero-medium.jpg">

            <!-- Small screens (mobile) -->
            <source srcset="hero-small.avif" type="image/avif">
            <source srcset="hero-small.webp" type="image/webp">

            <img src="hero-small.jpg" alt="Responsive hero image"
                 width="1200" height="600">
        </picture>

        <h3>Animation format cascade</h3>
        <picture>
            <source srcset="animation.avif" type="image/avif">
            <source srcset="animation.webp" type="image/webp">
            <source srcset="animation.apng" type="image/apng">
            <source srcset="animation.gif" type="image/gif">
            <img src="animation.gif" alt="Animated content" width="400" height="300">
        </picture>

        <h3>Video format cascade</h3>
        <video width="854" height="480" controls poster="poster.jpg">
            <!-- AV1 in WebM: Best quality/size ratio -->
            <source src="video-av1.webm" type="video/webm; codecs=av01.0.08M.08,opus">
            <!-- VP9 in WebM: Good compression -->
            <source src="video-vp9.webm" type="video/webm; codecs=vp9,opus">
            <!-- VP8 in WebM: Wide support -->
            <source src="video-vp8.webm" type="video/webm; codecs=vp8,vorbis">
            <!-- H.264 in MP4: Universal fallback -->
            <source src="video.mp4" type="video/mp4; codecs=avc1.42E01E,mp4a.40.2">
            <source src="video.mp4" type="video/mp4">
            Your browser does not support HTML5 video.
        </video>
    </section>

    <!-- Format comparison table -->
    <section>
        <h2>Media Format Comparison</h2>

        <h3>Image Formats</h3>
        <table border="1" cellpadding="10">
            <thead>
                <tr>
                    <th>Format</th>
                    <th>Type</th>
                    <th>Compression</th>
                    <th>Animation</th>
                    <th>Transparency</th>
                    <th>Browser Support</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>AVIF</td>
                    <td>image/avif</td>
                    <td>Excellent</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Good (growing)</td>
                </tr>
                <tr>
                    <td>WebP</td>
                    <td>image/webp</td>
                    <td>Very Good</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Excellent</td>
                </tr>
                <tr>
                    <td>HEIF</td>
                    <td>image/heif</td>
                    <td>Excellent</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Limited</td>
                </tr>
                <tr>
                    <td>JPEG XL</td>
                    <td>image/jxl</td>
                    <td>Excellent</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Very Limited</td>
                </tr>
                <tr>
                    <td>APNG</td>
                    <td>image/apng</td>
                    <td>Good</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Very Good</td>
                </tr>
            </tbody>
        </table>

        <h3>Video Formats</h3>
        <table border="1" cellpadding="10">
            <thead>
                <tr>
                    <th>Format/Codec</th>
                    <th>Type</th>
                    <th>Quality</th>
                    <th>Browser Support</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>WebM (AV1)</td>
                    <td>video/webm</td>
                    <td>Excellent</td>
                    <td>Good (growing)</td>
                </tr>
                <tr>
                    <td>WebM (VP9)</td>
                    <td>video/webm</td>
                    <td>Very Good</td>
                    <td>Excellent</td>
                </tr>
                <tr>
                    <td>WebM (VP8)</td>
                    <td>video/webm</td>
                    <td>Good</td>
                    <td>Excellent</td>
                </tr>
                <tr>
                    <td>MP4 (H.264)</td>
                    <td>video/mp4</td>
                    <td>Good</td>
                    <td>Universal</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!--
        VALIDATION INSTRUCTIONS:

        1. Load this file in Cross Guard
        2. Check that the following features are detected:
           - webm (video/webm in source elements)
           - webp (image/webp in source elements or .webp files)
           - avif (image/avif in source elements or .avif files)
           - heif (image/heif in source elements)
           - apng (image/apng in source elements)
        3. Verify browser support for each matches their respective Can I Use pages
        4. Record results in CHECKLIST.md
    -->
</body>
</html>
